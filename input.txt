from playwright.sync_api import sync_playwright

with sync_playwright() as p:
    browser = p.chromium.launch(headless=False)
    page = browser.new_page()
    page.goto("https://www.w3schools.com/html/html_tables.asp")

    # Highlight the first match using `window.find`
    page.evaluate("() => window.find('Maria Anders')")

    # Now extract the DOM element that contains the selection
    element_html = page.evaluate("""
        () => {
            const selection = window.getSelection();
            if (!selection.rangeCount) return null;

            const range = selection.getRangeAt(0);
            const node = range.startContainer;

            // Traverse up to the parent element (like a row)
            const element = node.nodeType === 3 ? node.parentElement : node;
            return element.outerHTML;
        }
    """)

    print("Highlighted element:\n", element_html)

    browser.close()
